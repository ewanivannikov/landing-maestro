import { Plugin } from 'vite';
import { DirectiveFn, ReplacerFn } from '@tanstack/directive-functions-plugin';
export type CreateRpcFn = (functionId: string, serverBase: string, splitImportFn?: string) => any;
declare global {
    var TSR_directiveFnsById: Record<string, DirectiveFn>;
}
export type ServerFnPluginOpts = {
    /**
     * The virtual import ID that will be used to import the server function manifest.
     * This virtual import ID will be used in the server build to import the manifest
     * and its modules.
     */
    manifestVirtualImportId: string;
    /**
     * The path to the manifest file that will be created during the build process.
     * This file will be used to import the modules for the server functions in your
     * server handler.
     *
     * @default 'node_modules/.tanstack-start/server-functions-manifest.json'
     */
    manifestOutputFilename?: string;
    client: ServerFnPluginEnvOpts;
    ssr: ServerFnPluginEnvOpts;
    server: ServerFnPluginEnvOpts;
    importer?: (fn: DirectiveFn) => Promise<any>;
};
export type ServerFnPluginEnvOpts = {
    getRuntimeCode: () => string;
    replacer: ReplacerFn;
};
export declare function createTanStackServerFnPlugin(opts: ServerFnPluginOpts): {
    client: Array<Plugin>;
    ssr: Array<Plugin>;
    server: Array<Plugin>;
};
export interface TanStackServerFnPluginEnvOpts {
    /**
     * The virtual import ID that will be used to import the server function manifest.
     * This virtual import ID will be used in the server build to import the manifest
     * and its modules.
     */
    manifestVirtualImportId: string;
    /**
     * The path to the manifest file that will be created during the build process.
     * This file will be used to import the modules for the server functions in your
     * server handler.
     *
     * @default 'node_modules/.tanstack-start/server-functions-manifest.json'
     */
    manifestOutputFilename?: string;
    client: {
        envName?: string;
        getRuntimeCode: () => string;
        replacer: ReplacerFn;
    };
    server: {
        envName?: string;
        getRuntimeCode: () => string;
        replacer: ReplacerFn;
    };
    importer?: (fn: DirectiveFn) => Promise<any>;
}
export declare function TanStackServerFnPluginEnv(opts: TanStackServerFnPluginEnvOpts): Array<Plugin>;
