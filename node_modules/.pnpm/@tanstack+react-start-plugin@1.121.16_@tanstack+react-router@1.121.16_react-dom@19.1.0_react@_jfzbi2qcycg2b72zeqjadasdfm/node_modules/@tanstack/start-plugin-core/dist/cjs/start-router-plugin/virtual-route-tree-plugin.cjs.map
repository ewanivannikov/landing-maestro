{"version":3,"file":"virtual-route-tree-plugin.cjs","sources":["../../../src/start-router-plugin/virtual-route-tree-plugin.ts"],"sourcesContent":["import path from 'node:path'\nimport { normalizePath } from 'vite'\nimport { debug } from '../debug'\nimport type { Config } from '@tanstack/router-generator'\nimport type { Plugin } from 'vite'\n\nexport const moduleId = 'tanstack-start-route-tree:v'\n\nexport function virtualRouteTreePlugin(config: Config): Plugin {\n  const generatedRouteTreePath = normalizePath(\n    path.resolve(config.generatedRouteTree),\n  )\n\n  return {\n    name: 'tanstack-start:virtual-route-tree',\n    enforce: 'pre',\n    sharedDuringBuild: true,\n    resolveId: {\n      filter: { id: new RegExp(moduleId) },\n      handler(id) {\n        let resolvedId: string | null = null\n        if (id === moduleId) {\n          if (debug) console.info('resolving id', id, generatedRouteTreePath)\n          resolvedId = generatedRouteTreePath\n        }\n        return resolvedId\n      },\n    },\n  }\n}\n"],"names":["normalizePath","debug"],"mappings":";;;;;AAMO,MAAM,WAAW;AAEjB,SAAS,uBAAuB,QAAwB;AAC7D,QAAM,yBAAyBA,KAAA;AAAA,IAC7B,KAAK,QAAQ,OAAO,kBAAkB;AAAA,EACxC;AAEO,SAAA;AAAA,IACL,MAAM;AAAA,IACN,SAAS;AAAA,IACT,mBAAmB;AAAA,IACnB,WAAW;AAAA,MACT,QAAQ,EAAE,IAAI,IAAI,OAAO,QAAQ,EAAE;AAAA,MACnC,QAAQ,IAAI;AACV,YAAI,aAA4B;AAChC,YAAI,OAAO,UAAU;AACnB,cAAIC,MAAAA,MAAO,SAAQ,KAAK,gBAAgB,IAAI,sBAAsB;AACrD,uBAAA;AAAA,QAAA;AAER,eAAA;AAAA,MAAA;AAAA,IACT;AAAA,EAEJ;AACF;;;"}